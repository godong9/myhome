<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Resume Management Service</title>
	<link href="css/style.css" rel="stylesheet"  />
</head>
<body>
	<div id="wrapper">
		<header id="main_header">
			<h1>회원 가입</h1>
		</header>

		<div id="join_box">
			<form>
				<div id="id_text">ID
					<input id="id_val" class="input_text_form"  type="text" value="Input Email.." onFocus="if (this.value == 'Input Email..') this.value=''" />
				</div>
				<div id="pw_text">PW
					<input id="pw_val" class="input_text_form" type="password"  />
				</div>
				<div id="pw_text">Re_PW
					<input id="pw2_val" class="input_text_form" type="password" />
				</div>
				<div id="name_text" class="other_text_form">Name
					<input id="name_val" class="input_text_form" type="text" />
				</div>
				<div id="nickname_text" class="other_text_form">Nickname
					<input id="nickname_val" class="input_text_form" type="text" />
				</div>
			</form>
			<div id="btn_box">
				<button id="join_btn" style='display:inline;' onClick="onClickComplete()">가입 완료</button>
			</div>
		</div>
	</div>
	
	<script src="js/jquery-1.10.2.min.js"></script>
	<script>
		function onClickComplete(){		
			var id = $('#id_val').val();
			var pw = $('#pw_val').val();
			var pw2 = $('#pw2_val').val();
			var name = $('#name_val').val();
			var nickname = $('#nickname_val').val();
	
			if(id == "Input Email.." || id == "" || pw == "" || pw2 == "" || name == "" || nickname == ""){
				alert("모든 항목을 입력해주세요!");
			}
			else if(pw != pw2){
				alert("패스워드를 잘못 입력하셨습니다!");
				$('#pw_val').focus();
			}
			else{
				var url = "join.jsp";
				$.ajax({
					url: url,
					type: 'POST',
					data: { id: id, pw: pw, name: name, nickname: nickname }, 
					success: function(response, status, request){
						var res = response.trim();	
						if(res == "success"){
							alert("회원가입 완료!");
							location.href="index.html";
						}
						else{
							console.log(res);
							alert("이미 사용중인 ID입니다!");
							$('#id_val').val("");
							$('#id_val').focus();
						}
					}
				});
			}
		}
		
	</script>
</body>
</html>